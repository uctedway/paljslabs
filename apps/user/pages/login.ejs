<main class="login-page">
  <section class="login-hero">
	<div class="login-card">
	  <% const mode = (authMode === 'register') ? 'register' : 'login'; %>
	  <% const socialActionText = '계속하기'; %>
	  <p class="login-kicker">48LAB ACCOUNT</p>
	  <h1 class="login-title"><%= mode === 'register' ? '48LAB 회원가입' : '48LAB 로그인' %></h1>
	  <p class="login-lead">원하는 소셜 계정으로 빠르게 시작하세요.</p>
	  <% if (loginErrorMessage) { %>
		<p class="login-error"><%= loginErrorMessage %></p>
	  <% } %>
	  <% if (mode === 'register') { %>
		<section class="signup-consent-section">
		  <h2 class="signup-consent-title">회원가입 약관 동의</h2>
		  <div class="signup-consent-grid">
			<div class="signup-consent-panel">
			  <p class="signup-consent-panel-title">이용약관</p>
			  <div class="signup-consent-scroll">
				<%- include('../../core/pages/partials/legal_terms_content') %>
			  </div>
			</div>
			<div class="signup-consent-panel">
			  <p class="signup-consent-panel-title">개인정보처리방침</p>
			  <div class="signup-consent-scroll">
				<%- include('../../core/pages/partials/legal_privacy_content') %>
			  </div>
			</div>
		  </div>
		  <div class="signup-consent-checks">
			<label class="signup-consent-check"><input type="checkbox" id="agree-terms"> 이용약관에 동의합니다. (필수)</label>
			<label class="signup-consent-check"><input type="checkbox" id="agree-privacy"> 개인정보처리방침에 동의합니다. (필수)</label>
		  </div>
		</section>
	  <% } %>

	  <script src="https://accounts.google.com/gsi/client" async defer></script>

	  <div
		id="g_id_onload"
		data-client_id="<%= googleClientId %>"
		data-callback="googleHandleCredentialResponse"
		data-auto_prompt="false">
	  </div>

	  <div class="login-providers">
		<div class="google-signin-wrap">
		  <div
			class="g_id_signin"
			data-type="standard"
			data-size="large"
			data-theme="outline"
			data-text="signin_with"
			data-shape="rectangular"
			data-logo_alignment="left"
			data-width="420">
		  </div>
		</div>

		<a class="provider-row naver-signin-btn <%= naverLoginUrl ? '' : 'is-disabled' %>" href="<%= naverLoginUrl || '#' %>">
		  <span class="provider-icon" aria-hidden="true">
			<img src="/images/icons/social/naver.svg" alt="">
		  </span>
		  <span class="provider-label">네이버로 <%= socialActionText %></span>
		</a>
		<a class="provider-row kakao-signin-btn <%= kakaoLoginUrl ? '' : 'is-disabled' %>" href="<%= kakaoLoginUrl || '#' %>">
		  <span class="provider-icon" aria-hidden="true">
			<img src="/images/icons/social/kakao.svg" alt="">
		  </span>
		  <span class="provider-label">카카오로 <%= socialActionText %></span>
		</a>
		<a class="provider-row apple-signin-btn <%= appleLoginUrl ? '' : 'is-disabled' %>" href="<%= appleLoginUrl || '#' %>">
		  <span class="provider-icon" aria-hidden="true">
			<img src="/images/icons/social/apple.svg" alt="">
		  </span>
		  <span class="provider-label">Apple로 <%= socialActionText %></span>
		</a>
	  </div>

	  <a class="email-entry-btn" href="<%= mode === 'register' ? '/user/email-register' : '/user/email-login' %>">
		<%= mode === 'register' ? '이메일로 회원가입' : '이메일로 로그인' %>
	  </a>

	  <p class="login-subtext">
		<% if (mode === 'register') { %>
		  이미 계정이 있으신가요? <a href="/user/login">로그인</a>
		<% } else { %>
		  아직 계정이 없으신가요? <a href="/user/register">회원가입</a>
		<% } %>
	  </p>

	  <script type="module">
		import { googleHandleCredentialResponse } from '/js/modules/apps/user/google_auth.js';
		import { initSignupConsentGate } from '/js/modules/apps/user/signup_consent.js';
		// GSI는 반드시 window에서 콜백을 찾음
		window.socialAuthIntent = '<%= mode %>';
		window.googleHandleCredentialResponse = googleHandleCredentialResponse;
		initSignupConsentGate();
	  </script>
	</div>
  </section>
</main>
