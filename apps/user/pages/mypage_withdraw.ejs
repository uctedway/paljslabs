<section class="mypage-shell">
  <%- include('./partials/mypage_sidebar', { currentMenu, consultationHistory, relatives }) %>

  <div class="mypage-content">
    <article class="mypage-card withdraw-card">
      <h3>회원탈퇴</h3>
      <p class="mypage-desc">
        탈퇴를 진행하면 계정 상태가 비활성화되며, 동일 계정 재가입 시 가입 보너스는 다시 지급되지 않습니다.
      </p>

      <ul class="withdraw-warnings">
        <li>보유 토큰은 소멸되며 복구되지 않습니다.</li>
        <li>마이페이지 접근 및 결제 기능이 즉시 중단됩니다.</li>
        <li>원국/상담 이력은 운영 및 법적 목적에 따라 별도 보관될 수 있습니다.</li>
      </ul>

      <form method="POST" data-action="/user/mypage/withdraw" data-confirm="정말 회원탈퇴를 진행하시겠습니까?">
        <label class="mypage-textarea">
          <span>탈퇴 사유 (선택)</span>
          <textarea name="withdraw_reason" maxlength="500" placeholder="탈퇴 사유를 입력해주세요."></textarea>
        </label>

        <label class="withdraw-confirm-text">
          <span>확인 문구 입력 (필수)</span>
          <input
            type="text"
            name="confirm_text"
            class="mustInput"
            data-alert="확인 문구를 입력해주세요."
            placeholder="탈퇴"
            maxlength="10"
            autocomplete="off">
        </label>

        <label class="withdraw-confirm-check">
          <input type="checkbox" class="mustInput" name="confirm_agree" value="1" data-alert="안내사항을 확인하고 동의해주세요.">
          <span>안내사항을 모두 확인했으며, 탈퇴 후 복구가 제한될 수 있음에 동의합니다.</span>
        </label>

        <div class="mypage-actions">
          <button type="submit" class="mypage-btn danger">회원탈퇴 진행</button>
          <a href="/user/mypage" class="mypage-btn">취소</a>
        </div>
      </form>
    </article>
  </div>
</section>

<script type="module">
  import { initFormContainer } from '/js/modules/form.js';
  initFormContainer();
</script>
